/*! For license information please see 587.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_openmrs_esm_form_engine_app=globalThis.webpackChunk_openmrs_esm_form_engine_app||[]).push([[587],{587:(e,t,n)=>{n.d(t,{Ay:()=>f,BE:()=>d});var r=n(97942),o=n(84524),i=n(54602),a=n(38298),s=n(62943);const c=()=>{};c(),new WeakMap;const u=r.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e}}),l={dedupe:!0},d=i.O.defineProperty(i.g,"defaultValue",{value:i.d}),f=(0,s.qm)(((e,t,n)=>{const{cache:c,compare:d,suspense:f,fallbackData:g,revalidateOnMount:h,revalidateIfStale:p,refreshInterval:v,refreshWhenHidden:w,refreshWhenOffline:y,keepPreviousData:m}=n,[b,O,S,_]=i.b.get(c),[E,R]=(0,i.s)(e),k=(0,r.useRef)(!1),T=(0,r.useRef)(!1),C=(0,r.useRef)(E),L=(0,r.useRef)(t),j=(0,r.useRef)(n),V=()=>j.current,D=()=>V().isVisible()&&V().isOnline(),[I,x,P,q]=(0,i.z)(c,E),A=(0,r.useRef)({}).current,F=(0,i.e)(g)?(0,i.e)(n.fallback)?i.U:n.fallback[E]:g,M=(e,t)=>{for(const n in A){const r=n;if("data"===r){if(!d(e[r],t[r])){if(!(0,i.e)(e[r]))return!1;if(!d(G,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},W=(0,r.useMemo)((()=>{const e=!!E&&!!t&&((0,i.e)(h)?!V().isPaused()&&!f&&!1!==p:h),n=t=>{const n=(0,i.m)(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=I(),o=q(),a=n(r),s=r===o?a:n(o);let c=a;return[()=>{const e=n(I());return M(e,c)?(c.data=e.data,c.isLoading=e.isLoading,c.isValidating=e.isValidating,c.error=e.error,c):(c=e,e)},()=>s]}),[c,E]),B=(0,o.useSyncExternalStore)((0,r.useCallback)((e=>P(E,((t,n)=>{M(n,t)||e()}))),[c,E]),W[0],W[1]),U=!k.current,$=b[E]&&b[E].length>0,z=B.data,H=(0,i.e)(z)?F&&(0,i.B)(F)?u(F):F:z,J=B.error,N=(0,r.useRef)(H),G=m?(0,i.e)(z)?(0,i.e)(N.current)?H:N.current:z:H,K=!($&&!(0,i.e)(J))&&(U&&!(0,i.e)(h)?h:!V().isPaused()&&(f?!(0,i.e)(H)&&p:(0,i.e)(H)||p)),Q=!!(E&&t&&U&&K),X=(0,i.e)(B.isValidating)?Q:B.isValidating,Y=(0,i.e)(B.isLoading)?Q:B.isLoading,Z=(0,r.useCallback)((async e=>{const t=L.current;if(!E||!t||T.current||V().isPaused())return!1;let r,o,s=!0;const c=e||{},u=!S[E]||!c.dedupe,l=()=>i.I?!T.current&&E===C.current&&k.current:E===C.current,f={isValidating:!1,isLoading:!1},g=()=>{x(f)},h=()=>{const e=S[E];e&&e[1]===o&&delete S[E]},p={isValidating:!0};(0,i.e)(I().data)&&(p.isLoading=!0);try{if(u&&(x(p),n.loadingTimeout&&(0,i.e)(I().data)&&setTimeout((()=>{s&&l()&&V().onLoadingSlow(E,n)}),n.loadingTimeout),S[E]=[t(R),(0,i.o)()]),[r,o]=S[E],r=await r,u&&setTimeout(h,n.dedupingInterval),!S[E]||S[E][1]!==o)return u&&l()&&V().onDiscarded(E),!1;f.error=i.U;const e=O[E];if(!(0,i.e)(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return g(),u&&l()&&V().onDiscarded(E),!1;const a=I().data;f.data=d(a,r)?a:r,u&&l()&&V().onSuccess(r,E,n)}catch(e){h();const t=V(),{shouldRetryOnError:n}=t;t.isPaused()||(f.error=e,u&&l()&&(t.onError(e,E,t),(!0===n||(0,i.a)(n)&&n(e))&&(V().revalidateOnFocus&&V().revalidateOnReconnect&&!D()||t.onErrorRetry(e,E,t,(e=>{const t=b[E];t&&t[0]&&t[0](a.I0,e)}),{retryCount:(c.retryCount||0)+1,dedupe:!0}))))}return s=!1,g(),!0}),[E,c]),ee=(0,r.useCallback)(((...e)=>(0,i.n)(c,C.current,...e)),[]);if((0,i.u)((()=>{L.current=t,j.current=n,(0,i.e)(z)||(N.current=z)})),(0,i.u)((()=>{if(!E)return;const e=Z.bind(i.U,l);let t=0;if(V().revalidateOnFocus){const e=Date.now();t=e+V().focusThrottleInterval}const n=(0,s.aw)(E,b,((n,r={})=>{if(n==a.CC){const n=Date.now();V().revalidateOnFocus&&n>t&&D()&&(t=n+V().focusThrottleInterval,e())}else if(n==a.jB)V().revalidateOnReconnect&&D()&&e();else{if(n==a.q2)return Z();if(n==a.I0)return Z(r)}}));return T.current=!1,C.current=E,k.current=!0,x({_k:R}),K&&((0,i.e)(H)||i.r?e():(0,i.t)(e)),()=>{T.current=!0,n()}}),[E]),(0,i.u)((()=>{let e;function t(){const t=(0,i.a)(v)?v(I().data):v;t&&-1!==e&&(e=setTimeout(n,t))}function n(){I().error||!w&&!V().isVisible()||!y&&!V().isOnline()?t():Z(l).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[v,w,y,E]),(0,r.useDebugValue)(G),f&&(0,i.e)(H)&&E){if(!i.I&&i.r)throw new Error("Fallback data is required when using Suspense in SSR.");L.current=t,j.current=n,T.current=!1;const e=_[E];if(!(0,i.e)(e)){const t=ee(e);u(t)}if(!(0,i.e)(J))throw J;{const e=Z(l);(0,i.e)(G)||(e.status="fulfilled",e.value=!0),u(e)}}return{mutate:ee,get data(){return A.data=!0,G},get error(){return A.error=!0,J},get isValidating(){return A.isValidating=!0,X},get isLoading(){return A.isLoading=!0,Y}}}))},29760:(e,t,n)=>{n.d(t,{q:()=>r});const r="$inf$"},38298:(e,t,n)=>{n.d(t,{CC:()=>r,I0:()=>a,jB:()=>o,q2:()=>i});const r=0,o=1,i=2,a=3},40905:(e,t,n)=>{var r=n(97942),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,l=r[1];return s((function(){o.value=n,o.getSnapshot=t,u(o)&&l({inst:o})}),[e,n,t]),a((function(){return u(o)&&l({inst:o}),e((function(){u(o)&&l({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},54602:(e,t,n)=>{n.d(t,{B:()=>g,I:()=>k,O:()=>u,S:()=>J,U:()=>c,a:()=>d,b:()=>a,c:()=>U,d:()=>z,e:()=>l,f:()=>H,g:()=>N,i:()=>w,m:()=>f,n:()=>M,o:()=>F,r:()=>T,s:()=>q,t:()=>C,u:()=>L,z:()=>b});var r=n(97942),o=n(38298),i=Object.prototype.hasOwnProperty;const a=new WeakMap,s=()=>{},c=s(),u=Object,l=e=>e===c,d=e=>"function"==typeof e,f=(e,t)=>({...e,...t}),g=e=>d(e.then),h={},p={},v="undefined",w=typeof window!=v,y=typeof document!=v,m=w&&"Deno"in window,b=(e,t)=>{const n=a.get(e);return[()=>!l(t)&&e.get(t)||h,r=>{if(!l(t)){const o=e.get(t);t in p||(p[t]=o),n[5](t,f(o,r),o||h)}},n[6],()=>!l(t)&&t in p?p[t]:!l(t)&&e.get(t)||h]};let O=!0;const[S,_]=w&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[s,s],E={isOnline:()=>O,isVisible:()=>{const e=y&&document.visibilityState;return l(e)||"hidden"!==e}},R={initFocus:e=>(y&&document.addEventListener("visibilitychange",e),S("focus",e),()=>{y&&document.removeEventListener("visibilitychange",e),_("focus",e)}),initReconnect:e=>{const t=()=>{O=!0,e()},n=()=>{O=!1};return S("online",t),S("offline",n),()=>{_("online",t),_("offline",n)}}},k=!r.useId,T=!w||m,C=e=>w&&typeof window.requestAnimationFrame!=v?window.requestAnimationFrame(e):setTimeout(e,1),L=T?r.useEffect:r.useLayoutEffect,j="undefined"!=typeof navigator&&navigator.connection,V=!T&&j&&(["slow-2g","2g"].includes(j.effectiveType)||j.saveData),D=new WeakMap,I=(e,t)=>u.prototype.toString.call(e)===`[object ${t}]`;let x=0;const P=e=>{const t=typeof e,n=I(e,"Date"),r=I(e,"RegExp"),o=I(e,"Object");let i,a;if(u(e)!==e||n||r)i=n?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(i=D.get(e),i)return i;if(i=++x+"~",D.set(e,i),Array.isArray(e)){for(i="@",a=0;a<e.length;a++)i+=P(e[a])+",";D.set(e,i)}if(o){i="#";const t=u.keys(e).sort();for(;!l(a=t.pop());)l(e[a])||(i+=a+":"+P(e[a])+",");D.set(e,i)}}return i},q=e=>{if(d(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?P(e):"",t]};let A=0;const F=()=>++A;async function M(...e){const[t,n,r,i]=e,s=f({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{});let u=s.populateCache;const h=s.rollbackOnError;let p=s.optimisticData;const v=s.throwOnError;if(d(n)){const e=n,r=[],o=t.keys();for(const n of o)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(w))}return w(n);async function w(n){const[i]=q(n);if(!i)return;const[f,w]=b(t,i),[y,m,O,S]=a.get(t),_=()=>{const e=y[i];return(d(s.revalidate)?s.revalidate(f().data,n):!1!==s.revalidate)&&(delete O[i],delete S[i],e&&e[0])?e[0](o.q2).then((()=>f().data)):f().data};if(e.length<3)return _();let E,R=r;const k=F();m[i]=[k,0];const T=!l(p),C=f(),L=C.data,j=C._c,V=l(j)?L:j;if(T&&(p=d(p)?p(V,L):p,w({data:p,_c:V})),d(R))try{R=R(V)}catch(e){E=e}if(R&&g(R)){if(R=await R.catch((e=>{E=e})),k!==m[i][0]){if(E)throw E;return R}E&&T&&(e=>"function"==typeof h?h(e):!1!==h)(E)&&(u=!0,w({data:V,_c:c}))}if(u&&!E)if(d(u)){const e=u(R,V);w({data:e,error:c,_c:c})}else w({data:R,error:c,_c:c});if(m[i][1]=F(),Promise.resolve(_()).then((()=>{w({_c:c})})),!E)return R;if(v)throw E}}const W=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},B=(e,t)=>{if(!a.has(e)){const n=f(R,t),r=Object.create(null),i=M.bind(c,e);let u=s;const l=Object.create(null),d=(e,t)=>{const n=l[e]||[];return l[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},g=(t,n,r)=>{e.set(t,n);const o=l[t];if(o)for(const e of o)e(n,r)},h=()=>{if(!a.has(e)&&(a.set(e,[r,Object.create(null),Object.create(null),Object.create(null),i,g,d]),!T)){const t=n.initFocus(setTimeout.bind(c,W.bind(c,r,o.CC))),i=n.initReconnect(setTimeout.bind(c,W.bind(c,r,o.jB)));u=()=>{t&&t(),i&&i(),a.delete(e)}}};return h(),[e,i,h,u]}return[e,a.get(e)[4]]},[U,$]=B(new Map),z=f({onLoadingSlow:s,onSuccess:s,onError:s,onErrorRetry:(e,t,n,r,o)=>{const i=n.errorRetryCount,a=o.retryCount,s=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!l(i)&&a>i||setTimeout(r,s,o)},onDiscarded:s,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:V?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:V?5e3:3e3,compare:function e(t,n){var r,o;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((o=t.length)===n.length)for(;o--&&e(t[o],n[o]););return-1===o}if(!r||"object"==typeof t){for(r in o=0,t){if(i.call(t,r)&&++o&&!i.call(n,r))return!1;if(!(r in n)||!e(t[r],n[r]))return!1}return Object.keys(n).length===o}}return t!=t&&n!=n},isPaused:()=>!1,cache:U,mutate:$,fallback:{}},E),H=(e,t)=>{const n=f(e,t);if(t){const{use:r,fallback:o}=e,{use:i,fallback:a}=t;r&&i&&(n.use=r.concat(i)),o&&a&&(n.fallback=f(o,a))}return n},J=(0,r.createContext)({}),N=e=>{const{value:t}=e,n=(0,r.useContext)(J),o=d(t),i=(0,r.useMemo)((()=>o?t(n):t),[o,n,t]),a=(0,r.useMemo)((()=>o?i:H(n,i)),[o,n,i]),s=i&&i.provider,u=(0,r.useRef)(c);s&&!u.current&&(u.current=B(s(a.cache||U),i));const l=u.current;return l&&(a.cache=l[0],a.mutate=l[1]),L((()=>{if(l)return l[2]&&l[2](),l[3]}),[]),(0,r.createElement)(J.Provider,f(e,{value:a}))}},62943:(e,t,n)=>{n.d(t,{Ht:()=>f,aw:()=>d,qm:()=>l});var r=n(54602),o=n(29760),i=n(97942);const a=r.i&&window.__SWR_DEVTOOLS_USE__,s=a?window.__SWR_DEVTOOLS_USE__:[],c=e=>(0,r.a)(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],u=s.concat((e=>(t,n,i)=>e(t,n&&((...e)=>{const[i]=(0,r.s)(t),[,,,a]=r.b.get(r.c);if(i.startsWith(o.q))return n(...e);const s=a[i];return(0,r.e)(s)?n(...e):(delete a[i],s)}),i))),l=e=>function(...t){const n=(0,r.m)(r.d,(0,i.useContext)(r.S)),[o,a,s]=c(t),l=(0,r.f)(n,s);let d=e;const{use:f}=l,g=(f||[]).concat(u);for(let e=g.length;e--;)d=g[e](d);return d(o,a||l.fetcher||null,l)},d=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}},f=(e,t)=>(...n)=>{const[r,o,i]=c(n),a=(i.use||[]).concat(t);return e(r,o,{...i,use:a})};a&&(window.__SWR_DEVTOOLS_REACT__=i)},84524:(e,t,n)=>{e.exports=n(40905)}}]);