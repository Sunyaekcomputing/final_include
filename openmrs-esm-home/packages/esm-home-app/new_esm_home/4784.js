"use strict";(globalThis.webpackChunk_openmrs_esm_home_app=globalThis.webpackChunk_openmrs_esm_home_app||[]).push([[4784],{4784:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(1343),o=n.n(r),a=n(38254);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function s(e){e.dashboardTitle;var t,n,s,c=l((0,r.useState)(null),2),f=c[0],d=c[1],p=l((0,r.useState)([]),2),m=p[0],g=p[1],y=(null!==(s=null===(t=(n=window).getOpenmrsSpaBase)||void 0===t?void 0:t.call(n))&&void 0!==s?s:"/openmrs/spa").replace(/\/$/,"");(0,r.useEffect)((function(){(0,a.openmrsFetch)("/ws/rest/v1/session").then((function(e){return e.json()})).then((function(e){return d(e.user)})).catch((function(e){return console.error("Error fetching session:",e)}))}),[]);var v=(0,r.useMemo)((function(){var e;return(null==f||null===(e=f.roles)||void 0===e?void 0:e.map((function(e){return e.display.toLowerCase()})))||[]}),[f]);return(0,r.useEffect)((function(){v.length&&!v.includes("self registration")&&(0,a.openmrsFetch)("/ws/fhir2/R4/Patient?_count=20").then((function(e){return e.json()})).then((function(e){var t=(e.entry||[]).map((function(e){return e.resource}));g(t)})).catch((function(e){return console.error("Error fetching patients:",e)}))}),[v]),(0,r.useEffect)((function(){var e=function(e){var t=e.detail;g((function(e){return[t].concat(function(e){if(Array.isArray(e))return i(e)}(n=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||u(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var n}))};return window.addEventListener("patient-registered",e),function(){return window.removeEventListener("patient-registered",e)}}),[]),o().createElement(o().Fragment,null,v.includes("self registration")?o().createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"100px"}},o().createElement("button",{style:{background:"linear-gradient(145deg, #005d5d, #005d5d)",color:"#fff",border:"none",borderRadius:"80px",padding:"2rem 3.5rem",fontSize:"2rem",fontWeight:900,fontFamily:"Noto Sans Devanagari, sans-serif",cursor:"pointer",textTransform:"uppercase",letterSpacing:"2.5px",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.35s ease"},onClick:function(){return(0,a.navigate)({to:"".concat(y,"/patient-registration")})},onMouseEnter:function(e){return e.target.style.background="linear-gradient(145deg, #339E71, #339E71)"},onMouseLeave:function(e){return e.target.style.background="linear-gradient(145deg, #005d5d, #005d5d)"}},o().createElement("span",{role:"img","aria-label":"person",style:{marginRight:"0.8rem",fontSize:"1.8rem",color:"#007bff",textShadow:"0 0 6px #66b2ff",userSelect:"none"}},"✍🏻"),o().createElement("span",{style:{marginTop:"10px",display:"inline-block"}},"दर्ता गर्नुहोस्"))):o().createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginTop:"50px",marginLeft:"40px",fontFamily:"Noto Sans Devanagari, sans-serif"}},o().createElement("h3",{style:{color:"#339E71",fontSize:"2.2rem",marginBottom:"20px"}},"Registered Patients"),0===m.length?o().createElement("p",{style:{fontStyle:"italic",fontSize:"1.2rem"}},"No patients found."):o().createElement("table",{style:{width:"400px",borderCollapse:"collapse",fontSize:"1.2rem",backgroundColor:"#f3fef3",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 8px rgba(0,0,0,0.05)"}},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",{style:{padding:"12px 20px",textAlign:"left",backgroundColor:"#339E71",color:"#fff",fontWeight:"600",letterSpacing:"0.5px"}},"सहभागीको एआरटि आईडी"))),o().createElement("tbody",null,m.map((function(e,t){var n,r;return o().createElement("tr",{key:t,onClick:function(){var t;(t=e).uuid&&(0,a.navigate)({to:"".concat(y,"/patient/").concat(t.uuid,"/chart")})},style:{cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:function(e){return e.currentTarget.style.backgroundColor="rgba(51, 158, 113, 0.1)"},onMouseLeave:function(e){return e.currentTarget.style.backgroundColor="transparent"}},o().createElement("td",{style:{padding:"14px 20px",borderBottom:"1px solid #d4f0d4",fontWeight:"500",color:"#333"}},(null===(r=e.identifiers)||void 0===r||null===(n=r.find((function(e){var t,n;return null===(n=e.type)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.includes("सहभागीको एआरटि आईडी")})))||void 0===n?void 0:n.value)||"N/A"))}))))))}}}]);